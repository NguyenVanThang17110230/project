{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/defineProperty\";\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport moment from 'moment';\nimport userOnly from '../../hocs/userOnly';\nimport { userService } from '../../services';\nimport { Link } from '../../../common/routes';\n\nvar Contact =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Contact, _Component);\n\n  _createClass(Contact, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ctx) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = ctx.store.getState().global.loginUser.data;\n                return _context.abrupt(\"return\", {\n                  headerText: 'Contacts',\n                  selectedSort: 'A-Z',\n                  user: user\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function Contact(props) {\n    var _this;\n\n    _classCallCheck(this, Contact);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Contact).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_getAllContact\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var id, res, data, dataLast, dataFirst, index, index2, index3;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              id = _this.props.user.id;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return userService.getAllContact(id);\n\n            case 4:\n              res = _context2.sent;\n              data = res.data.user.user;\n              dataLast = res.data.user.userLast;\n              dataFirst = res.data.user.userFirst;\n              index = data.map(function (x) {\n                return x.id;\n              }).indexOf(id);\n              data.splice(index, 1);\n              index2 = dataLast.map(function (x) {\n                return x.id;\n              }).indexOf(id);\n              dataLast.splice(index2, 1);\n              index3 = dataFirst.map(function (x) {\n                return x.id;\n              }).indexOf(id);\n              dataFirst.splice(index3, 1);\n\n              _this.setState({\n                dataUserLast: dataLast,\n                dataUserFirst: dataFirst\n              });\n\n              _this.viewAZ(data);\n\n              _context2.next = 20;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](1);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 18]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"_selectSort\", function (e) {\n      var sort = '';\n      var active = document.getElementsByClassName('activeB');\n\n      _toConsumableArray(active).forEach(function (acT) {\n        acT.classList.remove('activeB');\n      });\n\n      e.currentTarget.className += ' activeB';\n\n      switch (e.currentTarget.textContent) {\n        case 'Name A-Z':\n          sort = 'A-Z';\n          return _this.viewAZ(_this.state.dataAZ);\n\n        case 'Name Z-A':\n          sort = 'Z-A';\n          return _this.viewZA(_this.state.dataAZ);\n\n        case 'Newest':\n          sort = 'Newest';\n          return _this.viewRecent();\n\n        case 'Oldest':\n          sort = 'Oldest';\n          return _this.viewOldest();\n\n        default:\n          break;\n      }\n\n      _this.setState({\n        selectedSort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewUserContact\", function () {\n      var dataContact = _this.state.dataContact;\n\n      if (dataContact && dataContact.length > 0) {\n        return dataContact.map(function (data, idx) {\n          return React.createElement(\"div\", {\n            className: \"content\",\n            key: idx\n          }, React.createElement(\"div\", {\n            className: \"tab1\"\n          }, React.createElement(\"div\", {\n            className: \"cardArchived\"\n          }, React.createElement(\"div\", {\n            className: \"boxCard\"\n          }, React.createElement(\"div\", {\n            className: \"people col-4\"\n          }, React.createElement(Link, {\n            route: \"/contact/\".concat(data.id)\n          }, React.createElement(\"a\", {\n            className: \"people-link\"\n          }, React.createElement(\"img\", {\n            className: \"people-image\",\n            src: data.avatar ? data.avatar : '/static/images/default-avatar.png',\n            alt: \"\"\n          }), React.createElement(\"div\", {\n            className: \"people-profile\"\n          }, React.createElement(\"h6\", null, data.firstName ? data.firstName + ' ' + data.lastName : data.name), React.createElement(\"div\", null, data.company || 'None'))))), React.createElement(\"div\", {\n            className: \"state-archived col-2\"\n          }, React.createElement(\"div\", {\n            className: \"label-item\"\n          }, data.isInactive ? 'Inactive' : 'Active')), React.createElement(\"div\", {\n            className: \"address col-2\"\n          }, React.createElement(\"h6\", null, data.location || 'None')), React.createElement(\"div\", {\n            className: \"time-archived col-2\"\n          }, React.createElement(\"div\", {\n            className: \"green\"\n          }, moment(data.createdAt).format('ll'))), React.createElement(\"div\", {\n            className: \"contact-archived col-2\"\n          }, React.createElement(\"div\", {\n            className: \"contact-action\"\n          }, React.createElement(Link, {\n            route: \"/message\"\n          }, React.createElement(\"a\", {\n            href: \"\"\n          })), React.createElement(Link, null, React.createElement(\"a\", {\n            href: \"mailto:\".concat(data.email)\n          }))))))));\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewAZ\", function (dataContact) {\n      if (dataContact) {\n        var z = dataContact.sort(function (a, b) {\n          var x = '';\n          var y = '';\n\n          if (a.firstName && b.firstName) {\n            x = a.firstName.toLowerCase();\n            y = b.firstName.toLowerCase();\n          } else if (a.name && b.name) {\n            x = a.name.toLowerCase();\n            y = b.name.toLowerCase();\n          } else if (a.name && b.firstName) {\n            x = a.name.toLowerCase();\n            y = b.firstName.toLowerCase();\n          } else if (a.firstName && b.name) {\n            x = a.firstName.toLowerCase();\n            y = b.name.toLowerCase();\n          }\n\n          if (x < y) return -1;\n          if (x > y) return 1;\n          return 0;\n        });\n\n        _this.setState({\n          dataContact: z,\n          dataAZ: z\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewZA\", function (dataContact) {\n      if (dataContact) {\n        var z = dataContact.sort(function (a, b) {\n          var x = '';\n          var y = '';\n\n          if (a.firstName && b.firstName) {\n            x = a.firstName.toLowerCase();\n            y = b.firstName.toLowerCase();\n          } else if (a.name && b.name) {\n            x = a.name.toLowerCase();\n            y = b.name.toLowerCase();\n          } else if (a.name && b.firstName) {\n            x = a.name.toLowerCase();\n            y = b.firstName.toLowerCase();\n          } else if (a.firstName && b.name) {\n            x = a.firstName.toLowerCase();\n            y = b.name.toLowerCase();\n          }\n\n          if (x > y) return -1;\n          if (x < y) return 1;\n          return 0;\n        });\n\n        _this.setState({\n          dataContact: z\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewRecent\", function () {\n      _this.setState({\n        dataContact: _this.state.dataUserLast\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewOldest\", function () {\n      _this.setState({\n        dataContact: _this.state.dataUserFirst\n      });\n    });\n\n    _this.state = {\n      dataContact: []\n    };\n    return _this;\n  }\n\n  _createClass(Contact, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._getAllContact();\n    } // get all contact user\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"box-main\"\n      }, React.createElement(Head, null, React.createElement(\"title\", null, \"Contact\")), React.createElement(\"div\", {\n        className: \"demo-archived\"\n      }, React.createElement(\"div\", {\n        className: \"box-demo-archived\"\n      }, React.createElement(\"div\", {\n        className: \"box-sort\"\n      }, React.createElement(\"div\", {\n        className: \"typeSort activeB\",\n        onClick: this._selectSort\n      }, \"Name A-Z\"), React.createElement(\"div\", {\n        className: \"typeSort\",\n        onClick: this._selectSort\n      }, \"Name Z-A\"), React.createElement(\"div\", {\n        className: \"typeSort\",\n        onClick: this._selectSort\n      }, \"Newest\"), React.createElement(\"div\", {\n        className: \"typeSort\",\n        onClick: this._selectSort\n      }, \"Oldest\")), this._viewUserContact())), React.createElement(\"footer\", {\n        className: \"footer-card\",\n        style: {\n          padding: '2rem 0'\n        }\n      }, React.createElement(\"div\", {\n        className: \"footer-page\"\n      }, React.createElement(\"div\", {\n        className: \"footer-p1\"\n      }, \"\\xA9 Copyright Link Management Systems. All rights reserved\"), React.createElement(\"div\", {\n        className: \"footer-p2\"\n      }, \"Powered by Link Brokerages\"))));\n    }\n  }]);\n\n  return Contact;\n}(Component);\n\nexport default userOnly(Contact);","map":{"version":3,"sources":["/home/thang/Documents/GitHub/link-webapi/client/pages/Contact/index.js"],"names":["React","Component","Head","moment","userOnly","userService","Link","Contact","ctx","user","store","getState","global","loginUser","data","headerText","selectedSort","props","id","getAllContact","res","dataLast","userLast","dataFirst","userFirst","index","map","x","indexOf","splice","index2","index3","setState","dataUserLast","dataUserFirst","viewAZ","e","sort","active","document","getElementsByClassName","forEach","acT","classList","remove","currentTarget","className","textContent","state","dataAZ","viewZA","viewRecent","viewOldest","dataContact","length","idx","avatar","firstName","lastName","name","company","isInactive","location","createdAt","format","email","z","a","b","y","toLowerCase","_getAllContact","_selectSort","_viewUserContact","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Head from 'next/head'\nimport moment from 'moment'\nimport userOnly from '../../hocs/userOnly'\nimport { userService } from '../../services'\nimport { Link } from '../../../common/routes'\nclass Contact extends Component {\n  static async getInitialProps (ctx) {\n    const user = ctx.store.getState().global.loginUser.data\n    return {\n      headerText: 'Contacts',\n      selectedSort: 'A-Z',\n      user: user\n    }\n  }\n  constructor (props) {\n    super(props)\n    this.state = {\n      dataContact: []\n    }\n  }\n  componentDidMount () {\n    this._getAllContact()\n  }\n  // get all contact user\n  _getAllContact = async () => {\n    const id = this.props.user.id\n    try {\n      const res = await userService.getAllContact(id)\n      const data = res.data.user.user\n      const dataLast = res.data.user.userLast\n      const dataFirst = res.data.user.userFirst\n      const index = data.map(x => x.id).indexOf(id)\n      data.splice(index, 1)\n      const index2 = dataLast.map(x => x.id).indexOf(id)\n      dataLast.splice(index2, 1)\n      const index3 = dataFirst.map(x => x.id).indexOf(id)\n      dataFirst.splice(index3, 1)\n      this.setState({\n        dataUserLast: dataLast,\n        dataUserFirst: dataFirst\n      })\n      this.viewAZ(data)\n    } catch (e) {}\n  }\n  // select sort\n  _selectSort = e => {\n    let sort = ''\n    let active = document.getElementsByClassName('activeB')\n    ;[...active].forEach(acT => {\n      acT.classList.remove('activeB')\n    })\n    e.currentTarget.className += ' activeB'\n    switch (e.currentTarget.textContent) {\n      case 'Name A-Z':\n        sort = 'A-Z'\n        return this.viewAZ(this.state.dataAZ)\n      case 'Name Z-A':\n        sort = 'Z-A'\n        return this.viewZA(this.state.dataAZ)\n      case 'Newest':\n        sort = 'Newest'\n        return this.viewRecent()\n      case 'Oldest':\n        sort = 'Oldest'\n        return this.viewOldest()\n      default:\n        break\n    }\n    this.setState({\n      selectedSort: sort\n    })\n  }\n  // view user contact\n  _viewUserContact = () => {\n    const { dataContact } = this.state\n    if (dataContact && dataContact.length > 0) {\n      return dataContact.map((data, idx) => {\n        return (\n          <div className='content' key={idx}>\n            <div className='tab1'>\n              <div className='cardArchived'>\n                <div className='boxCard'>\n                  <div className='people col-4'>\n                    <Link route={`/contact/${data.id}`}>\n                      <a className='people-link'>\n                        <img\n                          className='people-image'\n                          src={\n                            data.avatar\n                              ? data.avatar\n                              : '/static/images/default-avatar.png'\n                          }\n                          alt=''\n                        />\n                        <div className='people-profile'>\n                          <h6>\n                            {data.firstName\n                              ? data.firstName + ' ' + data.lastName\n                              : data.name}\n                          </h6>\n                          <div>{data.company || 'None'}</div>\n                        </div>\n                      </a>\n                    </Link>\n                  </div>\n                  <div className='state-archived col-2'>\n                    <div className='label-item'>\n                      {data.isInactive ? 'Inactive' : 'Active'}\n                    </div>\n                  </div>\n                  <div className='address col-2'>\n                    <h6>{data.location || 'None'}</h6>\n                  </div>\n                  <div className='time-archived col-2'>\n                    <div className='green'>\n                      {moment(data.createdAt).format('ll')}\n                    </div>\n                  </div>\n                  <div className='contact-archived col-2'>\n                    <div className='contact-action'>\n                      <Link route='/message'>\n                        <a href='' />\n                      </Link>\n                      <Link>\n                        <a href={`mailto:${data.email}`} />\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      })\n    }\n  }\n  // view name a->z\n  viewAZ = dataContact => {\n    if (dataContact) {\n      const z = dataContact.sort((a, b) => {\n        let x = ''\n        let y = ''\n        if (a.firstName && b.firstName) {\n          x = a.firstName.toLowerCase()\n          y = b.firstName.toLowerCase()\n        } else if (a.name && b.name) {\n          x = a.name.toLowerCase()\n          y = b.name.toLowerCase()\n        } else if (a.name && b.firstName) {\n          x = a.name.toLowerCase()\n          y = b.firstName.toLowerCase()\n        } else if (a.firstName && b.name) {\n          x = a.firstName.toLowerCase()\n          y = b.name.toLowerCase()\n        }\n        if (x < y) return -1\n        if (x > y) return 1\n        return 0\n      })\n      this.setState({\n        dataContact: z,\n        dataAZ: z\n      })\n    }\n  }\n  // view name z->a\n  viewZA = dataContact => {\n    if (dataContact) {\n      const z = dataContact.sort((a, b) => {\n        let x = ''\n        let y = ''\n        if (a.firstName && b.firstName) {\n          x = a.firstName.toLowerCase()\n          y = b.firstName.toLowerCase()\n        } else if (a.name && b.name) {\n          x = a.name.toLowerCase()\n          y = b.name.toLowerCase()\n        } else if (a.name && b.firstName) {\n          x = a.name.toLowerCase()\n          y = b.firstName.toLowerCase()\n        } else if (a.firstName && b.name) {\n          x = a.firstName.toLowerCase()\n          y = b.name.toLowerCase()\n        }\n        if (x > y) return -1\n        if (x < y) return 1\n        return 0\n      })\n      this.setState({\n        dataContact: z\n      })\n    }\n  }\n  // view recent\n  viewRecent = () => {\n    this.setState({\n      dataContact: this.state.dataUserLast\n    })\n  }\n  // view oldest\n  viewOldest = () => {\n    this.setState({\n      dataContact: this.state.dataUserFirst\n    })\n  }\n  render () {\n    return (\n      <div className='box-main'>\n        <Head>\n          <title>Contact</title>\n        </Head>\n        <div className='demo-archived'>\n          <div className='box-demo-archived'>\n            <div className='box-sort'>\n              <div className='typeSort activeB' onClick={this._selectSort}>\n                Name A-Z\n              </div>\n              <div className='typeSort' onClick={this._selectSort}>\n                Name Z-A\n              </div>\n              <div className='typeSort' onClick={this._selectSort}>\n                Newest\n              </div>\n              <div className='typeSort' onClick={this._selectSort}>\n                Oldest\n              </div>\n            </div>\n            {this._viewUserContact()}\n          </div>\n        </div>\n        <footer className='footer-card' style={{ padding: '2rem 0' }}>\n          <div className='footer-page'>\n            <div className='footer-p1'>\n              Â© Copyright Link Management Systems. All rights reserved\n            </div>\n            <div className='footer-p2'>Powered by Link Brokerages</div>\n          </div>\n        </footer>\n      </div>\n    )\n  }\n}\n\nexport default userOnly(Contact)\n"]},"metadata":{},"sourceType":"module"}