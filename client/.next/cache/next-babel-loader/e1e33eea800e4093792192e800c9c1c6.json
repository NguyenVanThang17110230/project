{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/defineProperty\";\nimport React, { Component } from 'react';\nimport toastr from 'toastr';\nimport userOnly from '../hocs/userOnly';\nimport authRedux from '../redux/authRedux';\nimport { isCoordinator, Rank } from '../../common/models/User';\nimport { commissionService, userService } from '../services';\nimport { Formik } from 'formik';\nimport Head from 'next/head';\nimport { Link } from '../../common/routes';\nimport PhoneInput from 'react-phone-input-2';\nimport { commissionType } from '../../common/models/CashBalance';\n\nvar ProfilePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProfilePage, _Component);\n\n  _createClass(ProfilePage, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ctx) {\n        var user, _isCoordinator, role, cashType, commissionTotal;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = ctx.store.getState().global.loginUser.data;\n                _isCoordinator = isCoordinator(user);\n                _context.next = 4;\n                return userService.getUserRole({\n                  id: user.id\n                });\n\n              case 4:\n                role = _context.sent;\n                cashType = _isCoordinator ? commissionType.TC_COMMISSION : commissionType.AGENT_COMMISSION;\n                _context.next = 8;\n                return commissionService.countCommission({\n                  userId: user.id,\n                  type: cashType,\n                  isForThisYear: false\n                });\n\n              case 8:\n                commissionTotal = _context.sent;\n                return _context.abrupt(\"return\", {\n                  headerText: 'User Profile',\n                  isCoordinator: _isCoordinator,\n                  role: role,\n                  commissionTotal: commissionTotal\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function ProfilePage(props) {\n    var _this;\n\n    _classCallCheck(this, ProfilePage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfilePage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(values, action) {\n        var setSubmitting, currentUser, firstName, lastName, day, month, year, gender, company, phone, location, bio, avatar, dateOfBirth, msg;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                setSubmitting = action.setSubmitting;\n                currentUser = _this.state.currentUser;\n                _context2.prev = 2;\n                firstName = values.firstName, lastName = values.lastName, day = values.day, month = values.month, year = values.year, gender = values.gender, company = values.company, phone = values.phone, location = values.location, bio = values.bio, avatar = values.avatar;\n                dateOfBirth = day + '-' + month + '-' + year;\n                setSubmitting(true);\n                _context2.next = 8;\n                return userService.updateInfoUser(currentUser.id, {\n                  firstName: firstName,\n                  lastName: lastName,\n                  dateOfBirth: dateOfBirth,\n                  gender: gender,\n                  company: company,\n                  phone: phone,\n                  location: location,\n                  bio: bio\n                });\n\n              case 8:\n                if (!(_this.state.isChangeAvatar === true)) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                _context2.next = 11;\n                return _this._updateUserAvatar(currentUser.id, avatar);\n\n              case 11:\n                setSubmitting(false);\n\n                _this._fetchData();\n\n                toastr.success('Success');\n                _context2.next = 21;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](2);\n\n                switch (_context2.t0.code) {\n                  default:\n                    {\n                      msg = _context2.t0.message;\n                    }\n                }\n\n                toastr.error(msg);\n                setSubmitting(false);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 16]]);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateUserAvatar\",\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(userId, file) {\n        var dispatch, user;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                dispatch = _this.props.dispatch;\n                _context3.prev = 1;\n                _context3.next = 4;\n                return userService.updateUserAvatar(userId, file);\n\n              case 4:\n                _context3.next = 6;\n                return userService.getUserFromId(userId);\n\n              case 6:\n                user = _context3.sent;\n                _context3.next = 9;\n                return dispatch(authRedux.updateUserrAvatar(user.avatar));\n\n              case 9:\n                _this.setState({\n                  isChangeAvatar: false\n                }); //   toastr.success('Success')\n\n\n                _context3.next = 16;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](1);\n\n                _this.setState({\n                  savingUserAvatar: false\n                });\n\n                toastr.error(_context3.t0.message);\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 12]]);\n      }));\n\n      return function (_x4, _x5) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_fetchData\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var newUser;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return userService.getUserFromId(_this.state.currentUser.id);\n\n            case 2:\n              newUser = _context4.sent;\n\n              _this.setState({\n                currentUser: newUser\n              });\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"_submitCoverImage\",\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(coverImage) {\n        var currentUser, msg;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                currentUser = _this.state.currentUser;\n\n                if (!coverImage) {\n                  _context5.next = 13;\n                  break;\n                }\n\n                _context5.prev = 2;\n                _context5.next = 5;\n                return userService.uploadCoverImageUser(currentUser.id, coverImage);\n\n              case 5:\n                _this._fetchData();\n\n                toastr.success('Success');\n                _context5.next = 13;\n                break;\n\n              case 9:\n                _context5.prev = 9;\n                _context5.t0 = _context5[\"catch\"](2);\n\n                switch (_context5.t0.code) {\n                  default:\n                    {\n                      msg = _context5.t0.message;\n                    }\n                }\n\n                toastr.error(msg);\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[2, 9]]);\n      }));\n\n      return function (_x6) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_selectedView\", function (e) {\n      var active = document.getElementsByClassName('current-i');\n\n      _toConsumableArray(active).forEach(function (acT) {\n        acT.classList.remove('current-i');\n      });\n\n      e.currentTarget.className += ' current-i';\n\n      _this.setState({\n        view: e.currentTarget.textContent\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewInfoLeft\", function () {\n      return React.createElement(\"div\", {\n        className: \"col-12 col-md-8\"\n      }, React.createElement(\"div\", {\n        className: \"th-top\"\n      }, _this.state.currentUser.coverImage ? React.createElement(\"img\", {\n        src: _this.state.currentUser.coverImage,\n        alt: \"\"\n      }) : React.createElement(\"img\", {\n        src: \"https://uploads-ssl.webflow.com/5fd97ed8cd0cf9c4c8e747de/5fd97ed93cbe53f54b630763_christian-perner-UKLIuV8rAks-unsplash.jpg\",\n        alt: \"\"\n      }), React.createElement(\"div\", {\n        className: \"th-square th-center\"\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        accept: \"accept='image/*\",\n        className: \"input-image\",\n        onChange: function onChange(event) {\n          _this._submitCoverImage(event.currentTarget.files[0]);\n        }\n      }), React.createElement(\"img\", {\n        src: \"/static/images/New/pencil.png\",\n        alt: \"\"\n      }))), React.createElement(\"div\", {\n        className: \"th-bottom\"\n      }, React.createElement(\"div\", {\n        className: \"card-bottom\"\n      }, React.createElement(\"div\", {\n        className: \"th-menu\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-md-9 d-flex align-items-center flex-column flex-sm-row\"\n      }, React.createElement(\"div\", {\n        className: \"box-avt\"\n      }, _this.state.currentUser.avatar ? React.createElement(\"img\", {\n        className: \"avatar-image\",\n        src: _this.state.currentUser.avatar,\n        alt: \"\"\n      }) : React.createElement(\"img\", {\n        className: \"avatar-image\",\n        src: \"/static/images/default-avatar.png\",\n        alt: \"\"\n      })), React.createElement(\"h5\", {\n        className: \"profile-name profile-name__big pl-2\",\n        style: {\n          WebkitBoxOrient: 'vertical'\n        }\n      }, _this.state.currentUser.firstName ? _this.state.currentUser.firstName.concat(' ', _this.state.currentUser.lastName) : _this.state.currentUser.name)), React.createElement(\"div\", {\n        className: \"col-12 col-md-3 th-center flex-row-reverse\"\n      }, React.createElement(Link, {\n        route: \"/contact\"\n      }, React.createElement(\"button\", {\n        className: \"button-link\"\n      }, \"Contact\")))), React.createElement(\"div\", {\n        className: \"gr-menu th-row\"\n      }, React.createElement(\"div\", {\n        className: \"me current-i\",\n        onClick: _this._selectedView\n      }, \"About\"), React.createElement(\"div\", {\n        className: \"me\",\n        onClick: _this._selectedView\n      }, \"Edit profile\"))), React.createElement(\"div\", {\n        className: \"th-info mt-3\"\n      }, _this.state.view === 'About' && React.createElement(\"div\", null, _this._viewAbout()), _this.state.view === 'Edit profile' && React.createElement(\"div\", null, _this._viewEditProfile()), _this.state.view === 'Friends' && React.createElement(\"div\", null, \"Friends\")))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewRole\", function (user) {\n      if (user.roles) {\n        if (user.roles[0].name === 'coordinator') {\n          return 'Transaction Coordinator';\n        }\n\n        if (user.roles[0].name === 'agent') {\n          switch (user.rank) {\n            case Rank.AGENT:\n              return 'Agent';\n\n            case Rank.EXECUTIVE_AGENT:\n              return 'Executive Agent';\n\n            case Rank.VICE_PRESIDENT:\n              return 'Vice President';\n\n            case Rank.PARTNER:\n              return 'Agent';\n\n            default:\n              break;\n          }\n        }\n\n        if (user.roles[0].name === 'user') {\n          return 'User';\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewAbout\", function () {\n      var currentUser = _this.state.currentUser;\n\n      if (currentUser.dateOfBirth) {\n        var date = currentUser.dateOfBirth.split('-');\n        var length = currentUser.dateOfBirth.split('-').length;\n\n        if (date[1] === '' || date[2] === '') {\n          length--;\n        }\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"th-row\"\n      }, React.createElement(\"div\", {\n        className: \"col-6 th-pl-0\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"Phone\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, currentUser.phone || 'None')), React.createElement(\"div\", {\n        className: \"col-6 th-pr-0 pl-2\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"date of birth\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, length && length === 3 ? currentUser.dateOfBirth : 'None')), React.createElement(\"div\", {\n        className: \"col-12 col-sm-6 th-pl-0\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"email\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, currentUser.email)), React.createElement(\"div\", {\n        className: \"col-12 col-sm-6 th-pr-0 pl-0 pl-sm-2\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"location\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, currentUser.location || 'None'))), React.createElement(\"div\", {\n        className: \"th-row\"\n      }, React.createElement(\"div\", {\n        className: \"col-12 th-pr-0 th-pl-0\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"position\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, \"Link \", _this._viewRole(currentUser)))), React.createElement(\"div\", {\n        className: \"th-row\"\n      }, React.createElement(\"div\", {\n        className: \"col-12 th-pr-0 th-pl-0\"\n      }, React.createElement(\"label\", {\n        className: \"th-title-up\"\n      }, \"bio\"), React.createElement(\"p\", {\n        className: \"th-font-color\"\n      }, currentUser.bio || 'None'))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_previewImage\", function (image) {\n      var img = document.querySelector('.avatar-image');\n\n      if (image !== null) {\n        var reader = new window.FileReader();\n        reader.addEventListener('load', function () {\n          var result = reader.result;\n          img.src = result;\n        });\n        reader.readAsDataURL(image);\n      }\n\n      _this.setState({\n        isChangeAvatar: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewEditProfile\", function () {\n      var currentUser = _this.state.currentUser;\n\n      if (currentUser.dateOfBirth) {\n        var day = currentUser.dateOfBirth.split('-');\n      }\n\n      if (!currentUser.firstName && currentUser.name) {\n        var name = currentUser.name.split(' ');\n      }\n\n      var day1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31];\n      var month = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n      return React.createElement(\"div\", {\n        className: \"w-form\"\n      }, React.createElement(Formik, {\n        initialValues: {\n          firstName: name ? name[0] : currentUser.firstName,\n          lastName: name ? name[1] : currentUser.lastName,\n          avatar: currentUser.avatar,\n          coverImage: currentUser.coverImage,\n          day: day ? day[0] : '',\n          month: day ? day[1] : '',\n          year: day ? day[2] : '',\n          gender: currentUser.gender,\n          company: currentUser.company,\n          phone: currentUser.phone,\n          location: currentUser.location,\n          bio: currentUser.bio\n        },\n        onSubmit: function onSubmit(values, action) {\n          return _this.handleSubmit(values, action);\n        },\n        validate: function validate(values) {}\n      }, function (_ref5) {\n        var values = _ref5.values,\n            isSubmitting = _ref5.isSubmitting,\n            handleSubmit = _ref5.handleSubmit,\n            handleChange = _ref5.handleChange,\n            setFieldValue = _ref5.setFieldValue;\n        return React.createElement(\"form\", {\n          className: \"wf-form-profile\",\n          onSubmit: handleSubmit\n        }, React.createElement(\"div\", {\n          className: \"col-12 th-pl-0 mb-3\"\n        }, React.createElement(\"div\", {\n          className: \"custom-image\"\n        }, React.createElement(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"th-hidden check\",\n          onChange: function onChange(event) {\n            setFieldValue('avatar', event.currentTarget.files[0]);\n\n            _this._previewImage(event.currentTarget.files[0]);\n          }\n        }), React.createElement(\"div\", {\n          className: \"gr-up\"\n        }, React.createElement(\"img\", {\n          src: \"/static/images/New/cloud.png\",\n          alt: \"\",\n          style: {\n            width: '25px',\n            height: '25px',\n            marginRight: '8px'\n          }\n        }), React.createElement(\"span\", {\n          className: \"th-color-blue th-font-w-5\"\n        }, \"Upload photo\")))), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Frist Name\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"inputAddress\",\n          placeholder: \"Add first name\",\n          name: \"firstName\",\n          onChange: handleChange,\n          value: values.firstName\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Last Name\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"inputAddress\",\n          name: \"lastName\",\n          placeholder: \"Add last name\",\n          onChange: handleChange,\n          value: values.lastName\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          className: \"title-mini\"\n        }, \"Date of Birth\"), React.createElement(\"div\", {\n          className: \"row\"\n        }, React.createElement(\"div\", {\n          className: \"col-12 col-md-4\"\n        }, React.createElement(\"select\", {\n          id: \"inputState\",\n          className: \"form-control\",\n          name: \"day\",\n          onChange: handleChange,\n          value: values.day\n        }, React.createElement(\"option\", {\n          value: \"\"\n        }, \"Day\"), day1.map(function (data, idx) {\n          return React.createElement(\"option\", {\n            value: data,\n            key: idx\n          }, data);\n        }))), React.createElement(\"div\", {\n          className: \"col-12 col-md-4 mid-ver2\"\n        }, React.createElement(\"select\", {\n          id: \"inputState\",\n          className: \"form-control\",\n          name: \"month\",\n          onChange: handleChange,\n          value: values.month\n        }, React.createElement(\"option\", {\n          value: \"\"\n        }, \"Month\"), month.map(function (data, idx) {\n          return React.createElement(\"option\", {\n            value: data,\n            key: idx\n          }, data);\n        }))), React.createElement(\"div\", {\n          className: \"col-12 col-md-4\"\n        }, React.createElement(\"select\", {\n          id: \"inputState\",\n          className: \"form-control\",\n          name: \"year\",\n          onChange: handleChange,\n          value: values.year\n        }, React.createElement(\"option\", {\n          value: \"\"\n        }, \"Year\"), _this.state.year.map(function (data, idx) {\n          return React.createElement(\"option\", {\n            value: data,\n            key: idx\n          }, data);\n        }))))), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Gender\"), React.createElement(\"div\", {\n          className: \"form-check\"\n        }, React.createElement(\"input\", {\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"gender\",\n          id: \"gridRadios1\",\n          onChange: function onChange() {\n            return setFieldValue('gender', 1);\n          },\n          value: values.gender === 1,\n          defaultChecked: currentUser.gender === true\n        }), React.createElement(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"gridRadios1\"\n        }, \"Male\")), React.createElement(\"div\", {\n          className: \"form-check\"\n        }, React.createElement(\"input\", {\n          className: \"form-check-input\",\n          type: \"radio\",\n          name: \"gender\",\n          id: \"gridRadios2\",\n          onChange: function onChange() {\n            return setFieldValue('gender', 0);\n          },\n          value: values.gender === 0,\n          defaultChecked: currentUser.gender === false\n        }), React.createElement(\"label\", {\n          className: \"form-check-label\",\n          htmlFor: \"gridRadios2\"\n        }, \"Female\"))), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Company Name\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"inputAddress\",\n          placeholder: \"Add company name\",\n          name: \"company\",\n          onChange: handleChange,\n          value: values.company\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Contact Email\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"inputAddress\",\n          placeholder: \"Add contact email\",\n          name: \"email\",\n          value: currentUser.email\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Phone\"), React.createElement(PhoneInput, {\n          country: 'us',\n          enableSearch: true,\n          onChange: function onChange(value) {\n            handleChange({\n              target: {\n                name: 'phone',\n                value: value\n              }\n            });\n          },\n          value: values.phone,\n          placeholder: \"Add phone\",\n          className: \"form-control\"\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", {\n          htmlFor: \"inputAddress\"\n        }, \"Location\"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"inputAddress\",\n          placeholder: \"Add location\",\n          name: \"location\",\n          onChange: handleChange,\n          value: values.location\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"label\", null, \"Bio\"), React.createElement(\"textarea\", {\n          className: \"form-control\",\n          placeholder: \"Add bio\",\n          rows: 3,\n          name: \"bio\",\n          onChange: handleChange,\n          value: values.bio\n        })), React.createElement(\"div\", {\n          className: \"form-group\"\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-add-new mb-5 text-white th-button-save\" //   disabled={isSubmitting || !isValid}\n\n        }, isSubmitting && React.createElement(\"span\", {\n          className: \"spinner-border spinner-border-sm mr-2\"\n        }), \"Save\")));\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getYear\", function (date) {\n      var data = new Date(date);\n      var year = data.getFullYear(data);\n      return year;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_randomYear\", function () {\n      var arr = [];\n\n      for (var i = 1900; i <= 2021; i++) {\n        arr = [].concat(_toConsumableArray(arr), [i]);\n      }\n\n      _this.setState({\n        year: arr\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_viewInfoRight\", function () {\n      var commissionTotal = _this.props.commissionTotal;\n      return React.createElement(\"div\", {\n        className: \"col-12 col-md-4\",\n        style: {\n          paddingLeft: '10px',\n          paddingRight: '10px'\n        }\n      }, React.createElement(\"div\", {\n        className: \"section-inner\"\n      }, React.createElement(\"div\", {\n        className: \"card-m\"\n      }, React.createElement(\"div\", {\n        className: \"avatar-p\"\n      }, _this.state.currentUser.avatar ? React.createElement(\"img\", {\n        className: \"image-pr\",\n        src: _this.state.currentUser.avatar,\n        alt: \"\"\n      }) : React.createElement(\"img\", {\n        className: \"image-pr\",\n        src: \"/static/images/default-avatar.png\",\n        alt: \"\"\n      })), React.createElement(\"h5\", {\n        className: \"profile-name text-center\"\n      }, _this.state.currentUser.firstName ? _this.state.currentUser.firstName.concat(' ', _this.state.currentUser.lastName) : _this.state.currentUser.name), React.createElement(\"div\", {\n        className: \"text-center th-22\"\n      }, \"Link \", _this._viewRole(_this.state.currentUser)), React.createElement(\"div\", {\n        className: \"profile-social text-center\"\n      }, React.createElement(\"a\", {\n        href: \"https://www.facebook.com/\",\n        className: \"social-link social-link--fb w-inline-block\"\n      }), React.createElement(\"a\", {\n        href: \"https://twitter.com\",\n        className: \"social-link social-link--twitter w-inline-block\"\n      }), React.createElement(\"a\", {\n        href: \"https://www.instagram.com/\",\n        className: \"social-link social-link--insta w-inline-block\"\n      })), React.createElement(\"div\", {\n        className: \"row mx-0 th-card-x border-top\"\n      }, React.createElement(\"div\", {\n        className: \"text-center col-4 border-right px-0\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col-number\"\n      }, _this._getYear(_this.state.currentUser.createdAt)), React.createElement(\"div\", {\n        className: \"hint\"\n      }, \"Joined\"))), React.createElement(\"div\", {\n        className: \"text-center border-right col-4 px-0\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col-number\"\n      }, commissionTotal.count), React.createElement(\"div\", {\n        className: \"hint\"\n      }, \"Homes Sold\"))), React.createElement(\"div\", {\n        className: \"text-center col-4 px-0\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col\"\n      }, React.createElement(\"div\", {\n        className: \"profile-card-col-number\"\n      }, \"0\"), React.createElement(\"div\", {\n        className: \"hint\"\n      }, \"Agents Refered\")))))), React.createElement(\"div\", {\n        className: \"section-inner\"\n      }, React.createElement(\"div\", {\n        className: \"card no-padding\"\n      })));\n    });\n\n    _this.state = {\n      view: 'About',\n      currentUser: props.currentUser,\n      isChangeAvatar: false,\n      year: []\n    };\n    return _this;\n  } // submit\n\n\n  _createClass(ProfilePage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._randomYear();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"box-main\"\n      }, React.createElement(Head, null, React.createElement(\"title\", null, \"Profiles\")), React.createElement(\"div\", {\n        className: \"row\"\n      }, this._viewInfoLeft(), this._viewInfoRight()), React.createElement(\"footer\", {\n        className: \"footer-card\",\n        style: {\n          padding: '2rem 0'\n        }\n      }, React.createElement(\"div\", {\n        className: \"footer-page\"\n      }, React.createElement(\"div\", {\n        className: \"footer-p1\"\n      }, \"\\xA9 Copyright Link Management Systems. All rights reserved\"), React.createElement(\"div\", {\n        className: \"footer-p2\"\n      }, \"Powered by Link Brokerages\"))));\n    }\n  }]);\n\n  return ProfilePage;\n}(Component);\n\nexport default userOnly(ProfilePage);","map":{"version":3,"sources":["/home/thang/Documents/GitHub/link-webapi/client/pages/ProfilePage.js"],"names":["React","Component","toastr","userOnly","authRedux","isCoordinator","Rank","commissionService","userService","Formik","Head","Link","PhoneInput","commissionType","ProfilePage","ctx","user","store","getState","global","loginUser","data","_isCoordinator","getUserRole","id","role","cashType","TC_COMMISSION","AGENT_COMMISSION","countCommission","userId","type","isForThisYear","commissionTotal","headerText","props","values","action","setSubmitting","currentUser","state","firstName","lastName","day","month","year","gender","company","phone","location","bio","avatar","dateOfBirth","updateInfoUser","isChangeAvatar","_updateUserAvatar","_fetchData","success","code","msg","message","error","file","dispatch","updateUserAvatar","getUserFromId","updateUserrAvatar","setState","savingUserAvatar","newUser","coverImage","uploadCoverImageUser","e","active","document","getElementsByClassName","forEach","acT","classList","remove","currentTarget","className","view","textContent","event","_submitCoverImage","files","WebkitBoxOrient","concat","name","_selectedView","_viewAbout","_viewEditProfile","roles","rank","AGENT","EXECUTIVE_AGENT","VICE_PRESIDENT","PARTNER","date","split","length","email","_viewRole","image","img","querySelector","reader","window","FileReader","addEventListener","result","src","readAsDataURL","day1","handleSubmit","isSubmitting","handleChange","setFieldValue","_previewImage","width","height","marginRight","map","idx","value","target","Date","getFullYear","arr","i","paddingLeft","paddingRight","_getYear","createdAt","count","_randomYear","_viewInfoLeft","_viewInfoRight","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport toastr from 'toastr'\nimport userOnly from '../hocs/userOnly'\nimport authRedux from '../redux/authRedux'\nimport { isCoordinator, Rank } from '../../common/models/User'\nimport { commissionService, userService } from '../services'\nimport { Formik } from 'formik'\nimport Head from 'next/head'\nimport { Link } from '../../common/routes'\nimport PhoneInput from 'react-phone-input-2'\nimport { commissionType } from '../../common/models/CashBalance'\n\nclass ProfilePage extends Component {\n  static async getInitialProps (ctx) {\n    const user = ctx.store.getState().global.loginUser.data\n\n    let _isCoordinator = isCoordinator(user)\n    const role = await userService.getUserRole({ id: user.id })\n    const cashType = _isCoordinator\n      ? commissionType.TC_COMMISSION\n      : commissionType.AGENT_COMMISSION\n    const commissionTotal = await commissionService.countCommission({\n      userId: user.id,\n      type: cashType,\n      isForThisYear: false\n    })\n    return {\n      headerText: 'User Profile',\n      isCoordinator: _isCoordinator,\n      role: role,\n      commissionTotal\n    }\n  }\n  constructor (props) {\n    super(props)\n    this.state = {\n      view: 'About',\n      currentUser: props.currentUser,\n      isChangeAvatar: false,\n      year: []\n    }\n  }\n  // submit\n  handleSubmit = async (values, action) => {\n    const { setSubmitting } = action\n    const { currentUser } = this.state\n    try {\n      const {\n        firstName,\n        lastName,\n        day,\n        month,\n        year,\n        gender,\n        company,\n        phone,\n        location,\n        bio,\n        avatar\n      } = values\n      const dateOfBirth = day + '-' + month + '-' + year\n      setSubmitting(true)\n      await userService.updateInfoUser(currentUser.id, {\n        firstName,\n        lastName,\n        dateOfBirth,\n        gender,\n        company,\n        phone,\n        location,\n        bio\n      })\n      if (this.state.isChangeAvatar === true) {\n        await this._updateUserAvatar(currentUser.id, avatar)\n      }\n      setSubmitting(false)\n      this._fetchData()\n      toastr.success('Success')\n    } catch (e) {\n      let msg\n      switch (e.code) {\n        default: {\n          msg = e.message\n        }\n      }\n      toastr.error(msg)\n      setSubmitting(false)\n    }\n  }\n  // Change avatar\n  _updateUserAvatar = async (userId, file) => {\n    const { dispatch } = this.props\n    try {\n      await userService.updateUserAvatar(userId, file)\n      const user = await userService.getUserFromId(userId)\n      await dispatch(authRedux.updateUserrAvatar(user.avatar))\n      this.setState({\n        isChangeAvatar: false\n      })\n      //   toastr.success('Success')\n    } catch (error) {\n      this.setState({\n        savingUserAvatar: false\n      })\n      toastr.error(error.message)\n    }\n  }\n  _fetchData = async () => {\n    const newUser = await userService.getUserFromId(this.state.currentUser.id)\n    this.setState({\n      currentUser: newUser\n    })\n  }\n  // upload cover image\n  _submitCoverImage = async coverImage => {\n    const { currentUser } = this.state\n\n    if (coverImage) {\n      try {\n        await userService.uploadCoverImageUser(currentUser.id, coverImage)\n        this._fetchData()\n        toastr.success('Success')\n      } catch (e) {\n        let msg\n        switch (e.code) {\n          default: {\n            msg = e.message\n          }\n        }\n        toastr.error(msg)\n      }\n    }\n  }\n\n  // select tab view\n  _selectedView = e => {\n    let active = document.getElementsByClassName('current-i')\n    ;[...active].forEach(acT => {\n      acT.classList.remove('current-i')\n    })\n    e.currentTarget.className += ' current-i'\n    this.setState({\n      view: e.currentTarget.textContent\n    })\n  }\n  // view card left\n  _viewInfoLeft = () => {\n    return (\n      <div className='col-12 col-md-8'>\n        <div className='th-top'>\n          {this.state.currentUser.coverImage ? (\n            <img src={this.state.currentUser.coverImage} alt='' />\n          ) : (\n            <img\n              src='https://uploads-ssl.webflow.com/5fd97ed8cd0cf9c4c8e747de/5fd97ed93cbe53f54b630763_christian-perner-UKLIuV8rAks-unsplash.jpg'\n              alt=''\n            />\n          )}\n          <div className='th-square th-center'>\n            <input\n              type='file'\n              accept=\"accept='image/*\"\n              className='input-image'\n              onChange={event => {\n                this._submitCoverImage(event.currentTarget.files[0])\n              }}\n            />\n            <img src='/static/images/New/pencil.png' alt='' />\n          </div>\n        </div>\n        <div className='th-bottom'>\n          <div className='card-bottom'>\n            <div className='th-menu'>\n              <div className='row'>\n                <div className='col-12 col-md-9 d-flex align-items-center flex-column flex-sm-row'>\n                  <div className='box-avt'>\n                    {this.state.currentUser.avatar ? (\n                      <img\n                        className='avatar-image'\n                        src={this.state.currentUser.avatar}\n                        alt=''\n                      />\n                    ) : (\n                      <img\n                        className='avatar-image'\n                        src='/static/images/default-avatar.png'\n                        alt=''\n                      />\n                    )}\n                  </div>\n\n                  <h5\n                    className='profile-name profile-name__big pl-2'\n                    style={{ WebkitBoxOrient: 'vertical' }}\n                  >\n                    {this.state.currentUser.firstName\n                      ? this.state.currentUser.firstName.concat(\n                        ' ',\n                        this.state.currentUser.lastName\n                      )\n                      : this.state.currentUser.name}\n                  </h5>\n                </div>\n\n                <div className='col-12 col-md-3 th-center flex-row-reverse'>\n                  <Link route='/contact'>\n                    <button className='button-link'>Contact</button>\n                  </Link>\n                </div>\n              </div>\n\n              <div className='gr-menu th-row'>\n                <div className='me current-i' onClick={this._selectedView}>\n                  About\n                </div>\n                <div className='me' onClick={this._selectedView}>\n                  Edit profile\n                </div>\n                {/* <div className='me' onClick={this._selectedView}>\n                  Friends\n                </div> */}\n              </div>\n            </div>\n            <div className='th-info mt-3'>\n              {this.state.view === 'About' && <div>{this._viewAbout()}</div>}\n              {this.state.view === 'Edit profile' && (\n                <div>{this._viewEditProfile()}</div>\n              )}\n              {this.state.view === 'Friends' && <div>Friends</div>}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n  // view rank agent\n  _viewRole = user => {\n    if (user.roles) {\n      if (user.roles[0].name === 'coordinator') {\n        return 'Transaction Coordinator'\n      }\n      if (user.roles[0].name === 'agent') {\n        switch (user.rank) {\n          case Rank.AGENT:\n            return 'Agent'\n          case Rank.EXECUTIVE_AGENT:\n            return 'Executive Agent'\n          case Rank.VICE_PRESIDENT:\n            return 'Vice President'\n          case Rank.PARTNER:\n            return 'Agent'\n          default:\n            break\n        }\n      }\n      if (user.roles[0].name === 'user') {\n        return 'User'\n      }\n    }\n  }\n  // view tab about\n  _viewAbout = () => {\n    const { currentUser } = this.state\n    if (currentUser.dateOfBirth) {\n      var date = currentUser.dateOfBirth.split('-')\n      var length = currentUser.dateOfBirth.split('-').length\n      if (date[1] === '' || date[2] === '') {\n        length--\n      }\n    }\n    return (\n      <>\n        <div className='th-row'>\n          <div className='col-6 th-pl-0'>\n            <label className='th-title-up'>Phone</label>\n            <p className='th-font-color'>{currentUser.phone || 'None'}</p>\n          </div>\n          <div className='col-6 th-pr-0 pl-2'>\n            <label className='th-title-up'>date of birth</label>\n            <p className='th-font-color'>\n              {length && length === 3 ? currentUser.dateOfBirth : 'None'}\n            </p>\n          </div>\n          <div className='col-12 col-sm-6 th-pl-0'>\n            <label className='th-title-up'>email</label>\n            <p className='th-font-color'>{currentUser.email}</p>\n          </div>\n          <div className='col-12 col-sm-6 th-pr-0 pl-0 pl-sm-2'>\n            <label className='th-title-up'>location</label>\n            <p className='th-font-color'>{currentUser.location || 'None'}</p>\n          </div>\n        </div>\n        <div className='th-row'>\n          <div className='col-12 th-pr-0 th-pl-0'>\n            <label className='th-title-up'>position</label>\n            <p className='th-font-color'>Link {this._viewRole(currentUser)}</p>\n          </div>\n        </div>\n        <div className='th-row'>\n          <div className='col-12 th-pr-0 th-pl-0'>\n            <label className='th-title-up'>bio</label>\n            <p className='th-font-color'>{currentUser.bio || 'None'}</p>\n          </div>\n        </div>\n      </>\n    )\n  }\n  // preview image\n  _previewImage = image => {\n    const img = document.querySelector('.avatar-image')\n    if (image !== null) {\n      const reader = new window.FileReader()\n      reader.addEventListener('load', function () {\n        const result = reader.result\n        img.src = result\n      })\n      reader.readAsDataURL(image)\n    }\n    this.setState({\n      isChangeAvatar: true\n    })\n  }\n  // View edit profile\n  _viewEditProfile = () => {\n    const { currentUser } = this.state\n    if (currentUser.dateOfBirth) {\n      var day = currentUser.dateOfBirth.split('-')\n    }\n    if (!currentUser.firstName && currentUser.name) {\n      var name = currentUser.name.split(' ')\n    }\n\n    const day1 = [\n      1,\n      2,\n      3,\n      4,\n      5,\n      6,\n      7,\n      8,\n      9,\n      10,\n      11,\n      12,\n      13,\n      14,\n      15,\n      16,\n      17,\n      18,\n      19,\n      20,\n      21,\n      22,\n      23,\n      24,\n      25,\n      26,\n      27,\n      28,\n      29,\n      30,\n      31\n    ]\n    const month = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n    return (\n      <div className='w-form'>\n        <Formik\n          initialValues={{\n            firstName: name ? name[0] : currentUser.firstName,\n            lastName: name ? name[1] : currentUser.lastName,\n            avatar: currentUser.avatar,\n            coverImage: currentUser.coverImage,\n            day: day ? day[0] : '',\n            month: day ? day[1] : '',\n            year: day ? day[2] : '',\n            gender: currentUser.gender,\n            company: currentUser.company,\n            phone: currentUser.phone,\n            location: currentUser.location,\n            bio: currentUser.bio\n          }}\n          onSubmit={(values, action) => this.handleSubmit(values, action)}\n          validate={values => {}}\n        >\n          {({\n            values,\n            isSubmitting,\n            handleSubmit,\n            handleChange,\n            setFieldValue\n          }) => (\n            <form className='wf-form-profile' onSubmit={handleSubmit}>\n              <div className='col-12 th-pl-0 mb-3'>\n                <div className='custom-image'>\n                  <input\n                    type='file'\n                    accept='image/*'\n                    className='th-hidden check'\n                    onChange={event => {\n                      setFieldValue('avatar', event.currentTarget.files[0])\n                      this._previewImage(event.currentTarget.files[0])\n                    }}\n                  />\n                  <div className='gr-up'>\n                    <img\n                      src='/static/images/New/cloud.png'\n                      alt=''\n                      style={{\n                        width: '25px',\n                        height: '25px',\n                        marginRight: '8px'\n                      }}\n                    />\n                    <span className='th-color-blue th-font-w-5'>\n                      Upload photo\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Frist Name</label>\n                <input\n                  type='text'\n                  className='form-control'\n                  id='inputAddress'\n                  placeholder='Add first name'\n                  name='firstName'\n                  onChange={handleChange}\n                  value={values.firstName}\n                />\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Last Name</label>\n                <input\n                  type='text'\n                  className='form-control'\n                  id='inputAddress'\n                  name='lastName'\n                  placeholder='Add last name'\n                  onChange={handleChange}\n                  value={values.lastName}\n                />\n              </div>\n              <div className='form-group'>\n                <label className='title-mini'>Date of Birth</label>\n                <div className='row'>\n                  <div className='col-12 col-md-4'>\n                    <select\n                      id='inputState'\n                      className='form-control'\n                      name='day'\n                      onChange={handleChange}\n                      value={values.day}\n                    >\n                      <option value=''>Day</option>\n                      {day1.map((data, idx) => {\n                        return (\n                          <option value={data} key={idx}>\n                            {data}\n                          </option>\n                        )\n                      })}\n                    </select>\n                  </div>\n                  <div className='col-12 col-md-4 mid-ver2'>\n                    <select\n                      id='inputState'\n                      className='form-control'\n                      name='month'\n                      onChange={handleChange}\n                      value={values.month}\n                    >\n                      <option value=''>Month</option>\n                      {month.map((data, idx) => {\n                        return (\n                          <option value={data} key={idx}>\n                            {data}\n                          </option>\n                        )\n                      })}\n                    </select>\n                  </div>\n                  <div className='col-12 col-md-4'>\n                    <select\n                      id='inputState'\n                      className='form-control'\n                      name='year'\n                      onChange={handleChange}\n                      value={values.year}\n                    >\n                      <option value=''>Year</option>\n                      {this.state.year.map((data, idx) => {\n                        return (\n                          <option value={data} key={idx}>\n                            {data}\n                          </option>\n                        )\n                      })}\n                    </select>\n                  </div>\n                </div>\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Gender</label>\n                <div className='form-check'>\n                  <input\n                    className='form-check-input'\n                    type='radio'\n                    name='gender'\n                    id='gridRadios1'\n                    onChange={() => setFieldValue('gender', 1)}\n                    value={values.gender === 1}\n                    defaultChecked={currentUser.gender === true}\n                  />\n                  <label className='form-check-label' htmlFor='gridRadios1'>\n                    Male\n                  </label>\n                </div>\n                <div className='form-check'>\n                  <input\n                    className='form-check-input'\n                    type='radio'\n                    name='gender'\n                    id='gridRadios2'\n                    onChange={() => setFieldValue('gender', 0)}\n                    value={values.gender === 0}\n                    defaultChecked={currentUser.gender === false}\n                  />\n                  <label className='form-check-label' htmlFor='gridRadios2'>\n                    Female\n                  </label>\n                </div>\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Company Name</label>\n                <input\n                  type='text'\n                  className='form-control'\n                  id='inputAddress'\n                  placeholder='Add company name'\n                  name='company'\n                  onChange={handleChange}\n                  value={values.company}\n                />\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Contact Email</label>\n                <input\n                  type='text'\n                  className='form-control'\n                  id='inputAddress'\n                  placeholder='Add contact email'\n                  name='email'\n                  value={currentUser.email}\n                />\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Phone</label>\n                <PhoneInput\n                  country={'us'}\n                  enableSearch\n                  onChange={value => {\n                    handleChange({\n                      target: { name: 'phone', value }\n                    })\n                  }}\n                  value={values.phone}\n                  placeholder='Add phone'\n                  className='form-control'\n                />\n              </div>\n              <div className='form-group'>\n                <label htmlFor='inputAddress'>Location</label>\n                <input\n                  type='text'\n                  className='form-control'\n                  id='inputAddress'\n                  placeholder='Add location'\n                  name='location'\n                  onChange={handleChange}\n                  value={values.location}\n                />\n              </div>\n              <div className='form-group'>\n                <label>Bio</label>\n                <textarea\n                  className='form-control'\n                  placeholder='Add bio'\n                  rows={3}\n                  name='bio'\n                  onChange={handleChange}\n                  value={values.bio}\n                />\n              </div>\n              <div className='form-group'>\n                <button\n                  type='submit'\n                  className='btn btn-add-new mb-5 text-white th-button-save'\n                  //   disabled={isSubmitting || !isValid}\n                >\n                  {isSubmitting && (\n                    <span className='spinner-border spinner-border-sm mr-2' />\n                  )}\n                  Save\n                </button>\n              </div>\n            </form>\n          )}\n        </Formik>\n      </div>\n    )\n  }\n\n  // get year\n  _getYear = date => {\n    const data = new Date(date)\n    const year = data.getFullYear(data)\n    return year\n  }\n  componentDidMount () {\n    this._randomYear()\n  }\n  _randomYear = () => {\n    var arr = []\n    for (let i = 1900; i <= 2021; i++) {\n      arr = [...arr, i]\n    }\n    this.setState({\n      year: arr\n    })\n  }\n  // View card right\n  _viewInfoRight = () => {\n    const { commissionTotal } = this.props\n    return (\n      <div\n        className='col-12 col-md-4'\n        style={{ paddingLeft: '10px', paddingRight: '10px' }}\n      >\n        <div className='section-inner'>\n          <div className='card-m'>\n            <div className='avatar-p'>\n              {this.state.currentUser.avatar ? (\n                <img\n                  className='image-pr'\n                  src={this.state.currentUser.avatar}\n                  alt=''\n                />\n              ) : (\n                <img\n                  className='image-pr'\n                  src='/static/images/default-avatar.png'\n                  alt=''\n                />\n              )}\n            </div>\n            <h5 className='profile-name text-center'>\n              {this.state.currentUser.firstName\n                ? this.state.currentUser.firstName.concat(\n                  ' ',\n                  this.state.currentUser.lastName\n                )\n                : this.state.currentUser.name}\n            </h5>\n            <div className='text-center th-22'>\n              Link {this._viewRole(this.state.currentUser)}\n            </div>\n            <div className='profile-social text-center'>\n              <a\n                href='https://www.facebook.com/'\n                className='social-link social-link--fb w-inline-block'\n              />\n              <a\n                href='https://twitter.com'\n                className='social-link social-link--twitter w-inline-block'\n              />\n              <a\n                href='https://www.instagram.com/'\n                className='social-link social-link--insta w-inline-block'\n              />\n            </div>\n            <div className='row mx-0 th-card-x border-top'>\n              <div className='text-center col-4 border-right px-0'>\n                <div className='profile-card-col'>\n                  <div className='profile-card-col-number'>\n                    {this._getYear(this.state.currentUser.createdAt)}\n                  </div>\n                  <div className='hint'>Joined</div>\n                </div>\n              </div>\n              <div className='text-center border-right col-4 px-0'>\n                <div className='profile-card-col'>\n                  <div className='profile-card-col-number'>\n                    {commissionTotal.count}\n                  </div>\n                  <div className='hint'>Homes Sold</div>\n                </div>\n              </div>\n              <div className='text-center col-4 px-0'>\n                <div className='profile-card-col'>\n                  <div className='profile-card-col-number'>0</div>\n                  <div className='hint'>Agents Refered</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className='section-inner'>\n          <div className='card no-padding' />\n        </div>\n      </div>\n    )\n  }\n  render () {\n    return (\n      <div className='box-main'>\n        <Head>\n          <title>Profiles</title>\n        </Head>\n\n        <div className='row'>\n          {this._viewInfoLeft()}\n          {this._viewInfoRight()}\n        </div>\n\n        <footer className='footer-card' style={{ padding: '2rem 0' }}>\n          <div className='footer-page'>\n            <div className='footer-p1'>\n              © Copyright Link Management Systems. All rights reserved\n            </div>\n            <div className='footer-p2'>Powered by Link Brokerages</div>\n          </div>\n        </footer>\n      </div>\n    )\n  }\n}\n\nexport default userOnly(ProfilePage)\n"]},"metadata":{},"sourceType":"module"}